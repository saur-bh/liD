<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leben in Deutschland ‚Äì Flashcard Trainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark" />
  <style>
    /* Custom styles for flashcard UI */
    :focus { outline: none; }
    
    /* Flashcard container */
    .flashcard-container {
      perspective: 1000px;
      min-height: 500px;
    }
    
    .flashcard {
      position: relative;
      width: 100%;
      height: 100%;
      min-height: 500px;
      transform-style: preserve-3d;
      transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
      cursor: grab;
    }
    
    .flashcard.flipped {
      transform: rotateY(180deg);
    }
    
    .flashcard-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 1rem;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .flashcard-back {
      transform: rotateY(180deg);
    }
    
    /* Answer states */
    .choice.correct {
      border-color: rgb(34 197 94) !important;
      background: rgb(220 252 231) !important;
      color: rgb(21 128 61) !important;
    }
    
    .choice.incorrect {
      border-color: rgb(239 68 68) !important;
      background: rgb(254 226 226) !important;
      color: rgb(185 28 28) !important;
    }
    
    .choice.selected {
      border-color: rgb(59 130 246) !important;
      background: rgb(219 234 254) !important;
      transform: scale(1.02);
    }
    
    /* Swipe indicators */
    .swipe-indicator {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 10;
      pointer-events: none;
    }
    
    .swipe-left {
      left: 20px;
      color: rgb(239 68 68);
    }
    
    .swipe-right {
      right: 20px;
      color: rgb(34 197 94);
    }
    
    /* Progress ring */
    .progress-ring {
      transform: rotate(-90deg);
    }
    
    /* Animations */
    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes slideInLeft {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .slide-in-right {
      animation: slideInRight 0.4s ease-out;
    }
    
    .slide-in-left {
      animation: slideInLeft 0.4s ease-out;
    }
    
    /* Button improvements */
    .btn-primary {
      background: linear-gradient(135deg, rgb(59 130 246), rgb(37 99 235));
      box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.3);
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, rgb(37 99 235), rgb(29 78 216));
      box-shadow: 0 6px 20px 0 rgba(59, 130, 246, 0.4);
    }
    
    .btn-success {
      background: linear-gradient(135deg, rgb(34 197 94), rgb(22 163 74));
      box-shadow: 0 4px 14px 0 rgba(34, 197, 94, 0.3);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, rgb(239 68 68), rgb(220 38 38));
      box-shadow: 0 4px 14px 0 rgba(239, 68, 68, 0.3);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 text-slate-800 antialiased min-h-screen">
  <div class="max-w-md mx-auto px-4 py-6">
    <!-- Header -->
    <header class="text-center mb-6">
      <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">
        üá©üá™ Leben in Deutschland
      </h1>
      <p class="text-slate-600 text-sm">
        Flashcard Trainer ‚Ä¢ Swipe to navigate
      </p>
    </header>

    <!-- Progress & Controls -->
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-4 mb-6">
      <!-- Progress Display -->
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-3">
          <div class="relative w-12 h-12">
            <svg class="progress-ring w-12 h-12" viewBox="0 0 36 36">
              <path class="text-slate-200" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
              <path id="progressRing" class="text-blue-500" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            </svg>
            <div class="absolute inset-0 flex items-center justify-center text-xs font-bold text-slate-700">
              <span id="progressPercent">0%</span>
            </div>
          </div>
          <div>
            <div class="text-lg font-bold text-slate-800">
              <span id="doneCount">0</span>/<span id="totalCount">40</span>
            </div>
            <div class="text-sm text-slate-500">Score: <span id="scoreCount" class="font-medium text-green-600">0</span></div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-sm text-slate-500">Card</div>
          <div class="text-lg font-bold text-slate-800">
            <span id="currentCard">1</span>
          </div>
        </div>
      </div>
      
      <!-- Control Buttons -->
      <div class="grid grid-cols-2 gap-2">
        <button id="shuffleBtn" class="btn-primary text-white px-4 py-2 rounded-xl text-sm font-medium transition-all">
          üîÄ Shuffle
        </button>
        <button id="resetBtn" class="bg-slate-200 hover:bg-slate-300 text-slate-700 px-4 py-2 rounded-xl text-sm font-medium transition-all">
          üîÑ Reset
        </button>
      </div>
    </div>

    <!-- Question Container -->
    <div class="bg-white shadow-xl border border-white/20 rounded-2xl p-6 min-h-[500px]">
      <div id="questionContent" class="text-center">
        <!-- Question content will be injected here -->
      </div>
    </div>
    
    <!-- Navigation Controls -->
    <div class="flex justify-between items-center mt-6 gap-4">
      <button id="prevBtn" class="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 px-4 py-3 rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        ‚Üê Previous
      </button>
      
      <button id="nextBtn" class="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 px-4 py-3 rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        Next ‚Üí
      </button>
    </div>

    <!-- Footer -->
    <footer class="mt-8 text-center text-sm text-slate-500">
      <p>üí° <strong>Tip:</strong> You need only 17/33 correct in the real test</p>
      <p class="mt-1">Swipe left/right or use buttons to navigate</p>
    </footer>
  </div>

  <script>
    const DATA = [
      // id, q, choices[4], correct index, tip (English)
      {id:1,q:"Deutschland ist ‚Ä¶?",c:["eine Monarchie","ein Zentralstaat","eine Diktatur","ein demokratischer und sozialer Bundesstaat"],a:3,tip:"Germany = democracy + social + federal."},
      {id:2,q:"Was bedeutet ‚ÄûRechtsstaat‚Äú?",c:["Polizei macht Gesetze","Nur Regierung h√§lt Gesetze","Richter sind Politiker","Alle m√ºssen sich an Gesetze halten"],a:3,tip:"Rule of law = everyone obeys."},
      {id:3,q:"Was bedeutet ‚ÄûSozialstaat‚Äú?",c:["Der Staat hilft Menschen in Not","Der Staat geh√∂rt Unternehmen","Keine Steuern","Parteien verboten"],a:0,tip:"Sozial = support, welfare."},
      {id:4,q:"M√§nner und Frauen sind gleichberechtigt. Wo steht das?",c:["Artikel 1 GG","Artikel 5 GG","Artikel 20 GG","Artikel 3 GG"],a:3,tip:"Article 3 = equality of men & women."},
      {id:5,q:"Was garantiert Artikel 5 GG?",c:["Gleichberechtigung","Meinungs- und Pressefreiheit","Religionsfreiheit","Schulpflicht"],a:1,tip:"Article 5 = speech & press."},
      {id:6,q:"Was garantiert Artikel 4 GG?",c:["Pressefreiheit","Wahlrecht","Religionsfreiheit","Meinungsfreiheit"],a:2,tip:"Article 4 = freedom of religion."},
      {id:7,q:"Wie viele Bundesl√§nder hat Deutschland?",c:["14","15","16","17"],a:2,tip:"16 states (L√§nder)."},
      {id:8,q:"Nennen Sie die Stadtstaaten Deutschlands.",c:["Berlin, K√∂ln, M√ºnchen","Hamburg, Dresden, Leipzig","Berlin, Frankfurt, D√ºsseldorf","Berlin, Hamburg, Bremen"],a:3,tip:"BHB = Berlin‚ÄìHamburg‚ÄìBremen."},
      {id:9,q:"Welche Farben hat die deutsche Flagge?",c:["Schwarz‚ÄìGelb‚ÄìRot","Schwarz‚ÄìRot‚ÄìGold","Rot‚ÄìSchwarz‚ÄìOrange","Rot‚ÄìGold‚ÄìBlau"],a:1,tip:"Order: Black‚ÄìRed‚ÄìGold."},
      {id:10,q:"Wie hei√üt das deutsche Verfassungsgericht?",c:["Bundesgerichtshof","Bundesverwaltungsgericht","Bundesfinanzhof","Bundesverfassungsgericht"],a:3,tip:"‚ÄòVerfassung‚Äô = constitution court."},
      {id:11,q:"Was ist das Grundgesetz?",c:["Gesetzbuch","Bundesgesetz","Schulgesetz","Verfassung Deutschlands"],a:3,tip:"Grundgesetz = Basic Law = constitution."},
      {id:12,q:"Wer unterschreibt Gesetze nach Verabschiedung im Bundestag?",c:["Bundeskanzler","Bundespr√§sident","Bundestagspr√§sident","Bundesrat"],a:1,tip:"President signs laws."},
      {id:13,q:"Ab welchem Alter darf man in Deutschland w√§hlen?",c:["16","17","18","21"],a:2,tip:"18 = adult vote."},
      {id:14,q:"Wie oft finden Bundestagswahlen statt?",c:["alle 3 Jahre","alle 4 Jahre","alle 5 Jahre","alle 6 Jahre"],a:1,tip:"Every 4 years."},
      {id:15,q:"Was bedeutet aktives Wahlrecht?",c:["Recht gew√§hlt zu werden","Recht zu w√§hlen","Pflicht zu w√§hlen","Kein Wahlrecht"],a:1,tip:"Active = you vote."},
      {id:16,q:"Was bedeutet passives Wahlrecht?",c:["Recht zu w√§hlen","Pflicht zu w√§hlen","Recht, gew√§hlt zu werden","Nicht w√§hlen d√ºrfen"],a:2,tip:"Passive = be elected."},
      {id:17,q:"Am 3. Oktober feiert man ‚Ä¶?",c:["Musiktag","Nationstag","Stadttag","Einheit"],a:3,tip:"3 Oct = German Unity Day."},
      {id:18,q:"Wann fiel die Berliner Mauer?",c:["3. Oktober 1990","9. November 1989","1. September 1939","17. Juni 1953"],a:1,tip:"11/9/89 = wall down."},
      {id:19,q:"Der 27. Januar ist ein Gedenktag f√ºr ‚Ä¶?",c:["deutsche Einheit","Wiedervereinigung","EU","Opfer des Nationalsozialismus"],a:3,tip:"27 Jan = Holocaust remembrance."},
      {id:20,q:"Was war die DDR f√ºr ein Wirtschaftssystem?",c:["soziale Marktwirtschaft","Planwirtschaft","Freihandel","Kapitalismus"],a:1,tip:"DDR = planned economy."},
      {id:21,q:"Was ist die Hauptstadt Deutschlands?",c:["Bonn","M√ºnchen","Frankfurt","Berlin"],a:3,tip:"Capital = Berlin."},
      {id:22,q:"Wer w√§hlt den Bundeskanzler?",c:["Volk direkt","Bundestag","Bundesrat","Bundespr√§sident"],a:1,tip:"Parliament elects the chancellor."},
      {id:23,q:"Wer ist Staatsoberhaupt in Deutschland?",c:["Bundeskanzler","Bundestagspr√§sident","Ministerpr√§sident","Bundespr√§sident"],a:3,tip:"Head of state = Federal President."},
      {id:24,q:"Wie hei√üt die deutsche Nationalhymne?",c:["Deutschlandlied","Ode an die Freude","Wacht am Rhein","Einigkeit & Recht & Freiheit"],a:0,tip:"Deutschlandlied (3rd verse)."},
      {id:25,q:"Wof√ºr steht ‚ÄûEiserner Vorhang‚Äú?",c:["NS vs. Alliierten","Nord‚ÄìS√ºd","Europa vs. USA","Ostblock vs. Westen"],a:3,tip:"Cold War border East/West."},
      {id:26,q:"Wie viele EU-Staaten gibt es heute?",c:["21","23","25","27"],a:3,tip:"27 EU members."},
      {id:27,q:"Wie viele Fragen im Test (real)?",c:["25","35","40","33 (30 + 3 Landesfragen)"],a:3,tip:"Total 33 questions."},
      {id:28,q:"Wie viele richtige Antworten f√ºr Bestehen?",c:["15","17","20","25"],a:1,tip:"Need 17 correct."},
      {id:29,q:"Wie lange dauert der Test?",c:["45 Min","60 Min","90 Min","120 Min"],a:1,tip:"1 hour total."},
      {id:30,q:"Beispiel antisemitisches Verhalten?",c:["j√ºdisches Fest besuchen","Israel kritisieren","Holocaust leugnen","Fu√üball gegen Juden"],a:2,tip:"Denying Holocaust = antisemitism."},
      {id:31,q:"Woran erinnern Stolpersteine?",c:["Politiker","Verkehrstote","Musiker","Opfer des Nationalsozialismus"],a:3,tip:"Brass stones for Holocaust victims."},
      {id:32,q:"Wie wird Holocaust-Leugnung bestraft?",c:["Sozialk√ºrzung","100 Sozialstunden","ist erlaubt","Freiheitsstrafe bis 5 Jahre oder Geldstrafe"],a:3,tip:"Denial = prison or fine."},
      {id:33,q:"Welche Handlung zu Israel ist verboten?",c:["Kritik an Politik","Flagge zeigen","Diskussion","Aufruf zur Vernichtung Israels"],a:3,tip:"Calling to destroy Israel = illegal."},
      {id:34,q:"Wie viele Jahre j√ºdisches Leben in Deutschland (nachweislich)?",c:["300","700","1150","1700"],a:2,tip:"~1150 years documented."},
      {id:35,q:"Wer kann Mitglied bei Makkabi-Sportvereinen sein?",c:["nur Deutsche","nur Israelis","nur Religi√∂se","alle Menschen"],a:3,tip:"Open to everyone."},
      {id:36,q:"Wo sind die gr√∂√üten j√ºdischen Gemeinden?",c:["Hamburg & Essen","Berlin & M√ºnchen","N√ºrnberg & Stuttgart","Worms & Speyer"],a:1,tip:"Biggest = Berlin & Munich."},
      {id:37,q:"Wie hei√üt das j√ºdische Gebetshaus?",c:["Basilika","Moschee","Synagoge","Kirche"],a:2,tip:"Synagogue = Jewish house of prayer."},
      {id:38,q:"Rechtsgrundlage f√ºr die Gr√ºndung Israels?",c:["Zionistenkongress","Resolution der Vereinten Nationen","Vorschlag Bundesregierung","Vorschlag UdSSR"],a:1,tip:"UN Resolution (1947)."},
      {id:39,q:"Warum besondere Verantwortung f√ºr Israel?",c:["EU-Mitgliedschaft","Grundgesetz","christliche Tradition","nationalsozialistische Verbrechen"],a:3,tip:"Because of Nazi crimes (Holocaust)."},
      {id:40,q:"Wie hei√üt die Hymne Deutschlands?",c:["Wacht am Rhein","Deutschlandlied","Ode an die Freude","Einigkeit & Recht & Freiheit"],a:1,tip:"Deutschlandlied (sing verse 3)."}
    ];

    // Flashcard App State
    const questionContent = document.getElementById('questionContent');
    const totalCountEl = document.getElementById('totalCount');
    const doneCountEl = document.getElementById('doneCount');
    const scoreCountEl = document.getElementById('scoreCount');
    const progressRing = document.getElementById('progressRing');
    const progressPercent = document.getElementById('progressPercent');
    const currentCardEl = document.getElementById('currentCard');
    
    // Navigation elements
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const resetBtn = document.getElementById('resetBtn');

    let order = [...DATA.keys()];
    let userAnswers = new Map(); // id -> { selected: number, isCorrect: boolean, submitted: boolean }
    let score = 0;
    let currentIdx = 0;
    let selectedChoice = null;

    function fmtLetter(i){ return ["a","b","c","d"][i]; }

    function renderFlashcard() {
      const idx = order[currentIdx];
      const item = DATA[idx];
      const userAnswer = userAnswers.get(item.id);
      
      // Update card counter
      currentCardEl.textContent = (currentIdx + 1).toString();
      
      // Reset selected choice when changing cards
      if (!userAnswer || !userAnswer.submitted) {
        selectedChoice = null;
      }
      
      // Show answer and tip if answered, otherwise show question
      if (userAnswer && userAnswer.submitted) {
        const correctChoice = item.c[item.a];
        questionContent.innerHTML = `
          <div class="mb-4">
            <div class="text-sm text-blue-600 font-medium mb-2">Question ${item.id}/40</div>
            <h2 class="text-xl font-bold text-slate-800 mb-6">${item.q}</h2>
          </div>
          
          <div class="space-y-3 mb-6">
            ${item.c.map((choice, i) => {
              let choiceClass = "choice p-3 rounded-lg border-2 transition-all";
              let circleClass = "w-6 h-6 rounded-full border-2 flex items-center justify-center text-xs font-bold";
              
              if (i === item.a) {
                choiceClass += " correct";
                circleClass += " bg-green-500 border-green-500 text-white";
              } else if (i === userAnswer.selected && i !== item.a) {
                choiceClass += " incorrect";
                circleClass += " bg-red-500 border-red-500 text-white";
              } else {
                choiceClass += " border-slate-200 bg-white";
                circleClass += " border-slate-300";
              }
              
              return `
                <div class="${choiceClass}">
                  <div class="flex items-start gap-3">
                    <div class="${circleClass}">
                      ${fmtLetter(i).toUpperCase()}
                    </div>
                    <div class="flex-1 text-slate-700">${choice}</div>
                  </div>
                </div>
              `;
            }).join('')}
          </div>
          
          <div class="text-center mb-6">
            <div class="text-lg ${userAnswer.isCorrect ? 'text-green-600' : 'text-red-600'} font-bold mb-4">
              ${userAnswer.isCorrect ? '‚úÖ Correct!' : '‚ùå Incorrect'}
            </div>
            ${!userAnswer.isCorrect ? `
              <div class="text-sm text-slate-600 mb-4">
                You selected: <strong>${fmtLetter(userAnswer.selected).toUpperCase()}) ${item.c[userAnswer.selected]}</strong>
              </div>
            ` : ''}
          </div>
          
          <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
            <div class="text-amber-800">
              <span class="font-medium">üí° Memory Tip:</span> ${item.tip}
            </div>
          </div>
          
          <div class="text-center">
            <button id="nextQuestionBtn" class="btn-primary text-white px-6 py-3 rounded-lg font-medium transition-all">
              Next Question ‚Üí
            </button>
          </div>
        `;
      } else {
        // Show question
        questionContent.innerHTML = `
          <div class="mb-4">
            <div class="text-sm text-blue-600 font-medium mb-2">Question ${item.id}/40</div>
            <h2 class="text-xl font-bold text-slate-800 mb-6">${item.q}</h2>
          </div>
          <div class="space-y-3">
            ${item.c.map((choice, i) => {
              let choiceClass = "choice p-3 rounded-lg border-2 border-slate-200 bg-white hover:border-blue-300 transition-all cursor-pointer";
              let circleClass = "w-6 h-6 rounded-full border-2 border-slate-300 flex items-center justify-center text-xs font-bold";
              
              return `
                <div class="${choiceClass}" data-choice="${i}">
                  <div class="flex items-start gap-3">
                    <div class="${circleClass}">
                      ${fmtLetter(i).toUpperCase()}
                    </div>
                    <div class="flex-1 text-slate-700">${choice}</div>
                  </div>
                </div>
              `;
            }).join('')}
          </div>
          <div class="mt-6 text-center">
            <p class="text-sm text-slate-500">Click on an answer to see the result</p>
          </div>
        `;
      }
      
      updateProgress();
      updateNavigationButtons();
    }

    function updateProgress() {
      const answered = Array.from(userAnswers.values()).filter(answer => answer.submitted).length;
      const total = DATA.length;
      const percentage = Math.round((answered / total) * 100);
      
      doneCountEl.textContent = answered.toString();
      scoreCountEl.textContent = score.toString();
      progressPercent.textContent = `${percentage}%`;
      
      // Update progress ring
      const circumference = 2 * Math.PI * 15.9155;
      const strokeDasharray = `${(percentage / 100) * circumference}, ${circumference}`;
      progressRing.style.strokeDasharray = strokeDasharray;
    }
    
    function updateNavigationButtons() {
      prevBtn.disabled = currentIdx === 0;
      nextBtn.disabled = currentIdx === order.length - 1;
    }
    
    function goToNextQuestion() {
      if (currentIdx < order.length - 1) {
        currentIdx++;
        renderFlashcard();
      }
    }
    
    function goToCard(direction) {
      if (direction === 'next' && currentIdx < order.length - 1) {
        currentIdx++;
      } else if (direction === 'prev' && currentIdx > 0) {
        currentIdx--;
      }
      
      renderFlashcard();
    }
    
    function selectAnswer(choiceIndex) {
      const idx = order[currentIdx];
      const item = DATA[idx];
      const isCorrect = choiceIndex === item.a;
      
      // Update score
      const previousAnswer = userAnswers.get(item.id);
      if (previousAnswer && previousAnswer.submitted) {
        if (previousAnswer.isCorrect && !isCorrect) {
          score--;
        } else if (!previousAnswer.isCorrect && isCorrect) {
          score++;
        }
      } else if (isCorrect) {
        score++;
      }
      
      userAnswers.set(item.id, {
        selected: choiceIndex,
        isCorrect: isCorrect,
        submitted: true
      });
      
      renderFlashcard();
    }
    

    
    // Choice selection on question side
    questionContent.addEventListener('click', (e) => {
      const choice = e.target.closest('.choice');
      if (choice) {
        const idx = order[currentIdx];
        const item = DATA[idx];
        const userAnswer = userAnswers.get(item.id);
        
        // Don't allow selection if already answered
        if (userAnswer && userAnswer.submitted) return;
        
        const choiceIndex = parseInt(choice.dataset.choice);
        selectAnswer(choiceIndex);
      }
      
      // Handle next question button click
      if (e.target.id === 'nextQuestionBtn') {
        goToNextQuestion();
      }
    });
    
    // Button Event Listeners
    prevBtn.addEventListener('click', () => goToCard('prev'));
    nextBtn.addEventListener('click', () => goToCard('next'));
    
    // Control buttons
    shuffleBtn.addEventListener('click', () => {
      order = order.sort(() => Math.random() - 0.5);
      currentIdx = 0;
      renderFlashcard();
    });
    
    resetBtn.addEventListener('click', () => {
      order = [...DATA.keys()];
      userAnswers.clear();
      score = 0;
      currentIdx = 0;
      selectedChoice = null;
      renderFlashcard();
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      switch(e.key) {
        case 'ArrowLeft':
          e.preventDefault();
          goToCard('prev');
          break;
        case 'ArrowRight':
          e.preventDefault();
          goToCard('next');
          break;
        case '1':
        case '2':
        case '3':
        case '4':
          e.preventDefault();
          const choiceIndex = parseInt(e.key) - 1;
          if (choiceIndex >= 0 && choiceIndex < 4) {
            const idx = order[currentIdx];
            const item = DATA[idx];
            const userAnswer = userAnswers.get(item.id);
            if (!userAnswer || !userAnswer.submitted) {
              selectAnswer(choiceIndex);
            }
          }
          break;
      }
    });
    
    // Initial render
    renderFlashcard();
  </script>
</body>
</html>
