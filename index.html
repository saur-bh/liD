<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leben in Deutschland – 40er Lernmodus (Tailwind)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark" />
  <style>
    /* Safari-safe focus and details styling */
    :focus { outline: none; }
    .answer-revealed .choice.correct { border-color: rgb(34 197 94) !important; background: rgb(220 252 231); }
    .answer-revealed .choice.incorrect.selected { border-color: rgb(239 68 68) !important; background: rgb(254 226 226); }
    .choice.selected { box-shadow: 0 0 0 2px rgba(59,130,246,.4) inset; }
    .tip { display:none; }
    .show-tip .tip { display:block; }
  </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased">
  <div class="max-w-xl mx-auto px-2 py-4">
    <!-- Header -->
    <header class="flex items-start justify-between gap-4">
      <div>
        <h1 class="text-2xl md:text-3xl font-bold tracking-tight">Leben in Deutschland – 40 Fragen Trainer</h1>
        <p class="text-slate-600">Einfach üben: wähle eine Antwort, prüfe dich, zeige die Lösung, lerne mit Merkhilfe (EN).</p>
      </div>
      <div class="flex items-center gap-2">
        <button id="darkToggle" class="px-3 py-2 rounded-xl bg-slate-900 text-white text-sm hover:opacity-90 transition">
          🌙/☀️
        </button>
      </div>
    </header>

    <!-- Controls -->
    <section class="mt-4 grid gap-3 md:grid-cols-3">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-4">
        <div class="text-sm text-slate-500 mb-1">Fortschritt</div>
        <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
          <div id="progressBar" class="h-full bg-blue-500 w-0 transition-all duration-300"></div>
        </div>
        <div class="mt-2 text-sm"><span id="doneCount">0</span>/<span id="totalCount">0</span> beantwortet · Score: <span id="scoreCount">0</span></div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-4 flex items-center justify-between gap-2">
        <div>
          <div class="text-sm text-slate-500">Modus</div>
          <div class="font-medium">Üben (mit Lösungen)</div>
        </div>
        <div class="flex gap-2">
          <button id="revealAll" class="px-3 py-2 rounded-xl border border-slate-300 text-slate-700 text-sm hover:bg-slate-50">Alle Lösungen zeigen</button>
          <button id="hideAll" class="px-3 py-2 rounded-xl border border-slate-300 text-slate-700 text-sm hover:bg-slate-50">Alle Lösungen verbergen</button>
        </div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-4 flex items-center justify-between gap-2">
        <div>
          <div class="text-sm text-slate-500">Reihenfolge</div>
          <div class="font-medium">Original · oder Mischen</div>
        </div>
        <div class="flex gap-2">
          <button id="shuffleBtn" class="px-3 py-2 rounded-xl bg-blue-600 text-white text-sm hover:bg-blue-700">Mischen</button>
          <button id="resetBtn" class="px-3 py-2 rounded-xl border border-slate-300 text-slate-700 text-sm hover:bg-slate-50">Zurücksetzen</button>
        </div>
      </div>
    </section>

    <!-- Questions -->
    <section id="cards" class="mt-6 grid gap-4">
  <!-- JS will inject one card here -->
    </section>

    <!-- Footer -->
    <footer class="mt-10 text-center text-sm text-slate-500">
      <p>💡 Tipp: Du brauchst im echten Test nur <strong>17/33 richtig</strong> – diese 40 Karten helfen dir sicher zu bestehen.</p>
    </footer>
  </div>

  <script>
    const DATA = [
      // id, q, choices[4], correct index, tip (English)
      {id:1,q:"Deutschland ist …?",c:["eine Monarchie","ein Zentralstaat","eine Diktatur","ein demokratischer und sozialer Bundesstaat"],a:3,tip:"Germany = democracy + social + federal."},
      {id:2,q:"Was bedeutet „Rechtsstaat“?",c:["Polizei macht Gesetze","Nur Regierung hält Gesetze","Richter sind Politiker","Alle müssen sich an Gesetze halten"],a:3,tip:"Rule of law = everyone obeys."},
      {id:3,q:"Was bedeutet „Sozialstaat“?",c:["Der Staat hilft Menschen in Not","Der Staat gehört Unternehmen","Keine Steuern","Parteien verboten"],a:0,tip:"Sozial = support, welfare."},
      {id:4,q:"Männer und Frauen sind gleichberechtigt. Wo steht das?",c:["Artikel 1 GG","Artikel 5 GG","Artikel 20 GG","Artikel 3 GG"],a:3,tip:"Article 3 = equality of men & women."},
      {id:5,q:"Was garantiert Artikel 5 GG?",c:["Gleichberechtigung","Meinungs- und Pressefreiheit","Religionsfreiheit","Schulpflicht"],a:1,tip:"Article 5 = speech & press."},
      {id:6,q:"Was garantiert Artikel 4 GG?",c:["Pressefreiheit","Wahlrecht","Religionsfreiheit","Meinungsfreiheit"],a:2,tip:"Article 4 = freedom of religion."},
      {id:7,q:"Wie viele Bundesländer hat Deutschland?",c:["14","15","16","17"],a:2,tip:"16 states (Länder)."},
      {id:8,q:"Nennen Sie die Stadtstaaten Deutschlands.",c:["Berlin, Köln, München","Hamburg, Dresden, Leipzig","Berlin, Frankfurt, Düsseldorf","Berlin, Hamburg, Bremen"],a:3,tip:"BHB = Berlin–Hamburg–Bremen."},
      {id:9,q:"Welche Farben hat die deutsche Flagge?",c:["Schwarz–Gelb–Rot","Schwarz–Rot–Gold","Rot–Schwarz–Orange","Rot–Gold–Blau"],a:1,tip:"Order: Black–Red–Gold."},
      {id:10,q:"Wie heißt das deutsche Verfassungsgericht?",c:["Bundesgerichtshof","Bundesverwaltungsgericht","Bundesfinanzhof","Bundesverfassungsgericht"],a:3,tip:"‘Verfassung’ = constitution court."},
      {id:11,q:"Was ist das Grundgesetz?",c:["Gesetzbuch","Bundesgesetz","Schulgesetz","Verfassung Deutschlands"],a:3,tip:"Grundgesetz = Basic Law = constitution."},
      {id:12,q:"Wer unterschreibt Gesetze nach Verabschiedung im Bundestag?",c:["Bundeskanzler","Bundespräsident","Bundestagspräsident","Bundesrat"],a:1,tip:"President signs laws."},
      {id:13,q:"Ab welchem Alter darf man in Deutschland wählen?",c:["16","17","18","21"],a:2,tip:"18 = adult vote."},
      {id:14,q:"Wie oft finden Bundestagswahlen statt?",c:["alle 3 Jahre","alle 4 Jahre","alle 5 Jahre","alle 6 Jahre"],a:1,tip:"Every 4 years."},
      {id:15,q:"Was bedeutet aktives Wahlrecht?",c:["Recht gewählt zu werden","Recht zu wählen","Pflicht zu wählen","Kein Wahlrecht"],a:1,tip:"Active = you vote."},
      {id:16,q:"Was bedeutet passives Wahlrecht?",c:["Recht zu wählen","Pflicht zu wählen","Recht, gewählt zu werden","Nicht wählen dürfen"],a:2,tip:"Passive = be elected."},
      {id:17,q:"Am 3. Oktober feiert man …?",c:["Musiktag","Nationstag","Stadttag","Einheit"],a:3,tip:"3 Oct = German Unity Day."},
      {id:18,q:"Wann fiel die Berliner Mauer?",c:["3. Oktober 1990","9. November 1989","1. September 1939","17. Juni 1953"],a:1,tip:"11/9/89 = wall down."},
      {id:19,q:"Der 27. Januar ist ein Gedenktag für …?",c:["deutsche Einheit","Wiedervereinigung","EU","Opfer des Nationalsozialismus"],a:3,tip:"27 Jan = Holocaust remembrance."},
      {id:20,q:"Was war die DDR für ein Wirtschaftssystem?",c:["soziale Marktwirtschaft","Planwirtschaft","Freihandel","Kapitalismus"],a:1,tip:"DDR = planned economy."},
      {id:21,q:"Was ist die Hauptstadt Deutschlands?",c:["Bonn","München","Frankfurt","Berlin"],a:3,tip:"Capital = Berlin."},
      {id:22,q:"Wer wählt den Bundeskanzler?",c:["Volk direkt","Bundestag","Bundesrat","Bundespräsident"],a:1,tip:"Parliament elects the chancellor."},
      {id:23,q:"Wer ist Staatsoberhaupt in Deutschland?",c:["Bundeskanzler","Bundestagspräsident","Ministerpräsident","Bundespräsident"],a:3,tip:"Head of state = Federal President."},
      {id:24,q:"Wie heißt die deutsche Nationalhymne?",c:["Deutschlandlied","Ode an die Freude","Wacht am Rhein","Einigkeit & Recht & Freiheit"],a:0,tip:"Deutschlandlied (3rd verse)."},
      {id:25,q:"Wofür steht „Eiserner Vorhang“?",c:["NS vs. Alliierten","Nord–Süd","Europa vs. USA","Ostblock vs. Westen"],a:3,tip:"Cold War border East/West."},
      {id:26,q:"Wie viele EU-Staaten gibt es heute?",c:["21","23","25","27"],a:3,tip:"27 EU members."},
      {id:27,q:"Wie viele Fragen im Test (real)?",c:["25","35","40","33 (30 + 3 Landesfragen)"],a:3,tip:"Total 33 questions."},
      {id:28,q:"Wie viele richtige Antworten für Bestehen?",c:["15","17","20","25"],a:1,tip:"Need 17 correct."},
      {id:29,q:"Wie lange dauert der Test?",c:["45 Min","60 Min","90 Min","120 Min"],a:1,tip:"1 hour total."},
      {id:30,q:"Beispiel antisemitisches Verhalten?",c:["jüdisches Fest besuchen","Israel kritisieren","Holocaust leugnen","Fußball gegen Juden"],a:2,tip:"Denying Holocaust = antisemitism."},
      {id:31,q:"Woran erinnern Stolpersteine?",c:["Politiker","Verkehrstote","Musiker","Opfer des Nationalsozialismus"],a:3,tip:"Brass stones for Holocaust victims."},
      {id:32,q:"Wie wird Holocaust-Leugnung bestraft?",c:["Sozialkürzung","100 Sozialstunden","ist erlaubt","Freiheitsstrafe bis 5 Jahre oder Geldstrafe"],a:3,tip:"Denial = prison or fine."},
      {id:33,q:"Welche Handlung zu Israel ist verboten?",c:["Kritik an Politik","Flagge zeigen","Diskussion","Aufruf zur Vernichtung Israels"],a:3,tip:"Calling to destroy Israel = illegal."},
      {id:34,q:"Wie viele Jahre jüdisches Leben in Deutschland (nachweislich)?",c:["300","700","1150","1700"],a:2,tip:"~1150 years documented."},
      {id:35,q:"Wer kann Mitglied bei Makkabi-Sportvereinen sein?",c:["nur Deutsche","nur Israelis","nur Religiöse","alle Menschen"],a:3,tip:"Open to everyone."},
      {id:36,q:"Wo sind die größten jüdischen Gemeinden?",c:["Hamburg & Essen","Berlin & München","Nürnberg & Stuttgart","Worms & Speyer"],a:1,tip:"Biggest = Berlin & Munich."},
      {id:37,q:"Wie heißt das jüdische Gebetshaus?",c:["Basilika","Moschee","Synagoge","Kirche"],a:2,tip:"Synagogue = Jewish house of prayer."},
      {id:38,q:"Rechtsgrundlage für die Gründung Israels?",c:["Zionistenkongress","Resolution der Vereinten Nationen","Vorschlag Bundesregierung","Vorschlag UdSSR"],a:1,tip:"UN Resolution (1947)."},
      {id:39,q:"Warum besondere Verantwortung für Israel?",c:["EU-Mitgliedschaft","Grundgesetz","christliche Tradition","nationalsozialistische Verbrechen"],a:3,tip:"Because of Nazi crimes (Holocaust)."},
      {id:40,q:"Wie heißt die Hymne Deutschlands?",c:["Wacht am Rhein","Deutschlandlied","Ode an die Freude","Einigkeit & Recht & Freiheit"],a:1,tip:"Deutschlandlied (sing verse 3)."}
    ];

    // Mobile-friendly: show one card at a time
    const cardsEl = document.getElementById('cards');
    const totalCountEl = document.getElementById('totalCount');
    const doneCountEl = document.getElementById('doneCount');
    const scoreCountEl = document.getElementById('scoreCount');
    const progressBar = document.getElementById('progressBar');

    let order = [...DATA.keys()];
    let selected = new Map(); // id -> choice index
    let revealed = new Set(); // ids revealed
    let checked = new Set();  // ids checked (answered)
    let score = 0;
    let currentIdx = 0; // index in order

    function fmtLetter(i){ return ["a","b","c","d"][i]; }

    function render(){
      totalCountEl.textContent = DATA.length.toString();
      cardsEl.innerHTML = "";
      const idx = order[currentIdx];
      const item = DATA[idx];
      const isRevealed = revealed.has(item.id);
      const isChecked = checked.has(item.id);
      const sel = selected.get(item.id);

      const card = document.createElement('article');
      card.className = `rounded-2xl border border-slate-200 bg-white shadow-sm p-4 md:p-5 transition ${isRevealed?'answer-revealed':''} ${isChecked?'show-tip':''}`;
      card.dataset.id = item.id;

      // Header
      const head = document.createElement('div');
      head.className = "flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between";
      head.innerHTML = `
        <div class="font-semibold text-slate-800">#${item.id}. ${item.q}</div>
        <div class="flex gap-2 mt-2 sm:mt-0">
          <button class="reveal px-3 py-1.5 rounded-lg border border-slate-300 text-sm hover:bg-slate-50">${isRevealed?'Lösung verbergen':'Lösung zeigen'}</button>
          <button class="check px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm hover:bg-emerald-700">Prüfen</button>
        </div>
      `;
      card.appendChild(head);

      // Choices
      const list = document.createElement('div');
      list.className = "mt-3 grid gap-2";
      item.c.forEach((text, i)=>{
        const isCorrect = i === item.a;
        const isSelected = sel === i;

        const btn = document.createElement('button');
        btn.type = "button";
        btn.className = `choice w-full text-left px-3 py-2 rounded-xl border ${isSelected?'selected':''} ${isCorrect?'correct':''} ${isSelected && isRevealed && !isCorrect?'incorrect selected':''} border-slate-300 hover:bg-slate-50`;
        btn.dataset.choice = i;
        btn.innerHTML = `
          <div class="flex items-start gap-3">
            <div class="mt-0.5 shrink-0 font-mono text-xs uppercase tracking-wide text-slate-500">${fmtLetter(i)})</div>
            <div class="grow">${text}</div>
          </div>
        `;
        list.appendChild(btn);
      });
      card.appendChild(list);

      // Tip (always visible for memory)
      const tip = document.createElement('div');
      tip.className = "tip mt-3 text-sm text-slate-700 bg-amber-50 border border-amber-200 rounded-xl p-3 block";
      tip.innerHTML = `🧠 <span class="font-medium">Memory:</span> ${item.tip}`;
      card.appendChild(tip);

      // Footer row (status)
      const foot = document.createElement('div');
      foot.className = "mt-3 text-xs text-slate-500 flex items-center justify-between";
      const status = isChecked ? (sel===item.a ? "✅ Richtig" : "❌ Falsch") : "—";
      foot.innerHTML = `<div>Status: <span class="font-medium">${status}</span></div>`;
      card.appendChild(foot);

      // Navigation
      const nav = document.createElement('div');
      nav.className = "mt-4 flex justify-between gap-2";
      nav.innerHTML = `
        <button class="prev px-3 py-2 rounded-xl border border-slate-300 text-slate-700 text-sm w-1/2" ${currentIdx===0?'disabled':''}>← Zurück</button>
        <button class="next px-3 py-2 rounded-xl border border-slate-300 text-slate-700 text-sm w-1/2" ${currentIdx===order.length-1?'disabled':''}>Weiter →</button>
      `;
      card.appendChild(nav);

      cardsEl.appendChild(card);
      updateProgress();
    }

    function updateProgress(){
      const done = checked.size;
      const total = DATA.length;
      doneCountEl.textContent = done.toString();
      scoreCountEl.textContent = score.toString();
      progressBar.style.width = `${(done/total)*100}%`;
    }

    // Events
    cardsEl.addEventListener('click', (e)=>{
      const card = e.target.closest('article');
      if(!card) return;
      const id = Number(card.dataset.id);
      const item = DATA.find(d=>d.id===id);

      if(e.target.closest('.choice')){
        const btn = e.target.closest('.choice');
        const i = Number(btn.dataset.choice);
        selected.set(id, i);
        card.querySelectorAll('.choice').forEach(ch=>ch.classList.remove('selected'));
        btn.classList.add('selected');
      }

      if(e.target.closest('.reveal')){
        if(revealed.has(id)) revealed.delete(id); else revealed.add(id);
        render();
      }

      if(e.target.closest('.check')){
        if(!selected.has(id)) { alert("Bitte wähle eine Antwort."); return; }
        if(!checked.has(id)){
          checked.add(id);
          if(selected.get(id) === item.a) score++;
        }
        revealed.add(id);
        render();
      }

      if(e.target.closest('.prev')){
        if(currentIdx>0){ currentIdx--; render(); }
      }
      if(e.target.closest('.next')){
        if(currentIdx<order.length-1){ currentIdx++; render(); }
      }
    });

    // Top controls
    document.getElementById('shuffleBtn').addEventListener('click', ()=>{
      order = order.sort(()=>Math.random()-0.5);
      currentIdx = 0;
      render();
      window.scrollTo({top:0,behavior:'smooth'});
    });
    document.getElementById('resetBtn').addEventListener('click', ()=>{
      order = [...DATA.keys()];
      selected.clear(); revealed.clear(); checked.clear(); score = 0;
      currentIdx = 0;
      render();
      window.scrollTo({top:0,behavior:'smooth'});
    });
    document.getElementById('revealAll').addEventListener('click', ()=>{
  DATA.forEach(d=>revealed.add(d.id));
  render();
    });
    document.getElementById('hideAll').addEventListener('click', ()=>{
  revealed.clear(); render();
    });

    // Dark / Light
    const darkBtn = document.getElementById('darkToggle');
    function setDark(d){
      document.documentElement.classList.toggle('dark', d);
      document.body.classList.toggle('bg-slate-900', d);
      document.body.classList.toggle('text-slate-100', d);
    }
    darkBtn.addEventListener('click', ()=>{
      const isDark = document.documentElement.classList.contains('dark');
      setDark(!isDark);
    });

    // Initial render
  render();
  </script>
</body>
</html>
